<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Egg Size Summary Table</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="style.css">
</head>
<body>


<!-- Control bar ABOVE the table -->
<div class="controls">
  <button onclick="showAllRows()">Show Hidden Buildings</button>
  <button onclick="resetData()">Reset Data</button>
  <h1>ETANS EGG COMBINATION ðŸ¥š</h1>
  <img src="logo.jpg" alt="ETANS Logo" height="20" width="50">
</div>

<div class="table-container">
<table id="eggTable">
  <thead>
    <tr>
      <th rowspan="2" class="sticky-col">BUILDINGS</th>	
      <th colspan="3">NNV</th>
      <th colspan="3">NV</th>
      <th colspan="3">NW</th>
      <th colspan="3">PT</th>
      <th colspan="3">PW</th>
      <th colspan="3">S</th>
      <th colspan="3">M</th>
      <th colspan="3">L</th>
      <th colspan="3">XL</th>
      <th colspan="3">J</th>
      <th colspan="3">SJ</th>
      <th colspan="3">BR</th>
      <th colspan="3">BO</th>
    </tr>
    <tr>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
      <th>Case</th><th>Trays</th><th>Pcs</th>
    </tr>
  </thead>

  <tbody id="tableBody">
    <!-- Rows will be generated by JavaScript -->
  </tbody>
  
</table>

</div>

<!-- Navigation buttons -->
<div class="nav-buttons">
  <button onclick="window.location.href='https://etans-eggroom.netlify.app/index.html'">BACK TO HOME</button>
 
</div>

<script>
window.addEventListener("DOMContentLoaded", () => {
  loadTableData();
  loadHiddenRows();

  // Disable all "Case" inputs
  document.querySelectorAll("#eggTable tbody tr").forEach(row => {
    row.querySelectorAll("td:nth-child(2), td:nth-child(5), td:nth-child(8), td:nth-child(11), td:nth-child(14), td:nth-child(17), td:nth-child(20), td:nth-child(23), td:nth-child(26), td:nth-child(29), td:nth-child(32), td:nth-child(35), td:nth-child(38)")
      .forEach(cell => {
        const input = cell.querySelector("input");
        if (input) input.disabled = true;
      });
  });
});

const buildings = ["A","B","C","D","E","F","G","H"];
const tableBody = document.getElementById("tableBody");

// Generate rows and attach hide button events
buildings.forEach(b => {
  const tr = document.createElement("tr");
  tr.id = `row-${b}`;
  tr.innerHTML = `<td class="sticky-col"><b>${b}</b> 
                    <button class="hide-btn">Hide</button></td>` +
    Array(13 * 3).fill('<td><input type="number" min="0" value=""></td>').join("");
  tableBody.appendChild(tr);

  // Add event listener to hide button
  tr.querySelector("button.hide-btn").addEventListener("click", () => toggleRow(b));
});

// SUM TOTAL
let sumRow = document.createElement("tr");
sumRow.id = "sumRow";
sumRow.innerHTML = `<td class="sticky-col"><b>SUM TOTAL</b></td>` + 
  Array(13 * 3).fill('<td class="sumCell">0</td>').join("");
tableBody.appendChild(sumRow);

// SIMPLIFIED TOTAL
let simpRow = document.createElement("tr");
simpRow.id = "simplifiedRow";
simpRow.innerHTML = `<td class="sticky-col"><b>SIMPLIFIED TOTAL</b></td>` + 
  Array(13 * 3).fill('<td class="simpCell">0</td>').join("");
tableBody.appendChild(simpRow);

// LABELS ROW (NNV, NV, etc.)
let labelRow = document.createElement("tr");
labelRow.id = "labelRow";

// Name + color pairs
const sizeLabels = [
  { name: "NNV", color: "#ffd6d6" }, // light red
  { name: "NV",  color: "#fff0b3" }, // light yellow
  { name: "NW",  color: "#d6ffd6" }, // light green
  { name: "PT",  color: "#d6f0ff" }, // light blue
  { name: "PW",  color: "#e0ccff" }, // light purple
  { name: "S",   color: "#ffe0b2" }, // peach
  { name: "M",   color: "#b2dfdb" }, // teal
  { name: "L",   color: "#ffcdd2" }, // pink
  { name: "XL",  color: "#f0f4c3" }, // pale lime
  { name: "J",   color: "#c5cae9" }, // lavender
  { name: "SJ",  color: "#ffecb3" }, // light gold
  { name: "BR",  color: "#ffe082" }, // soft orange
  { name: "BO",  color: "#ffccbc" }  // light coral
];

labelRow.innerHTML = `<td class="sticky-col"><b>SIZE</b></td>` +
  sizeLabels.map(cat => 
    `<td colspan="3" style="text-align:center;font-weight:bold;background:${cat.color};">${cat.name}</td>`
  ).join("");

tableBody.appendChild(labelRow);


// CSS class for hidden rows
const style = document.createElement('style');
style.innerHTML = `.hidden { display: none; }`;
document.head.appendChild(style);

// Toggle row visibility
function toggleRow(id) {
  const row = document.getElementById(`row-${id}`);
  row.classList.toggle("hidden");

  // Save hidden rows
  const hiddenRows = [];
  buildings.forEach(b => {
    if (document.getElementById(`row-${b}`).classList.contains("hidden")) {
      hiddenRows.push(b);
    }
  });
  localStorage.setItem("hiddenRows", JSON.stringify(hiddenRows));
}

// Show all rows
function showAllRows() {
  buildings.forEach(b => document.getElementById(`row-${b}`).classList.remove("hidden"));
  localStorage.setItem("hiddenRows", JSON.stringify([]));
}

// Reset inputs
function resetData() {
  document.querySelectorAll("#eggTable input").forEach(i => i.value = "");
  localStorage.removeItem("tableData");
}

// Save inputs
function saveTableData() {
  const data = {};
  document.querySelectorAll("#eggTable input").forEach((input, index) => {
    data[index] = input.value;
  });
  localStorage.setItem("tableData", JSON.stringify(data));
}

// Load inputs
function loadTableData() {
  const savedData = JSON.parse(localStorage.getItem("tableData")) || {};
  document.querySelectorAll("#eggTable input").forEach((input, index) => {
    if (savedData.hasOwnProperty(index)) {
      input.value = savedData[index];
    }
  });
}

// Load hidden rows
function loadHiddenRows() {
  const hiddenRows = JSON.parse(localStorage.getItem("hiddenRows")) || [];
  hiddenRows.forEach(b => {
    const row = document.getElementById(`row-${b}`);
    if (row) row.classList.add("hidden");
  });
}

// Auto-save on input
document.addEventListener("input", e => {
  if (e.target.tagName === "INPUT") saveTableData();
});

// Load on page start
window.addEventListener("DOMContentLoaded", () => {
  loadTableData();
  loadHiddenRows();
});

</script>




<script src="script.js"></script>
</body>
</html>
